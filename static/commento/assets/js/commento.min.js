!function(e,t){"use strict";function n(e){return t.getElementById(e)}function o(e,t){e.appendChild(t)}function a(e,t,n){e.dataset[t]=n}function i(e,t){e.classList.add(t)}function r(e,t){e.classList.remove(t)}function c(e){return t.createElement(e)}function s(e,t,n){e.setAttribute(t,n)}function d(e,t,n){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===o.readyState&&200===o.status&&n(o)},o.send(function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(t))}function m(e){var t=n(e);t.disabled=!0,i(t,"loading")}function u(e){var t=n(e);t.disabled=!1,r(t,"loading")}function l(e){return function(){e.style.height="",e.style.height=Math.min(Math.max(e.scrollHeight,75),400)+"px"}}function p(e,t,n){e.addEventListener(t,n)}function v(e,t,n){return function(o){var a,i,r,c=o.target;(r=e,c.classList.contains(r)&&(i=t,a=c.dataset[i]))&&n(a)}}var h,f="commento-root-comment",y="commento-root-name",g="commento-root-post",b="commento-coms",M="commento-root-gotcha",x="commento-textarea-",w="comment-contents-",L="commento-name-input-",H="commento-gotcha-",T="commento-cancel-button-",C="commento-submit-button-",k="commento-body-",j="commento-reply-button-",E="commento-collapse-button-",S="commento-js-cancel",U="commento-show-reply-js",R="commento-collapse-thread-js",I="commento-expand-thread-js",N="commento-submit-js",A="card-body",O="option-btn",P="post-btn",q="post-primary-btn",B="hidden",D="other-fields",J="other-fields-container",X="textarea",z="is-error",F="commentId",G="/assets/vendor/showdown.min.js",K="/assets/style/commento.min.css",Q="",V="",W=!1,Y={},Z=function(e){var n={url:t.location};d(Y.get,n,function(t){var n={comments:[]};try{n=JSON.parse(t.response)}catch(e){}_(n.comments),"function"==typeof e&&e()})},$=function(e,t){var n=e[t];if(!n||!n.length)return null;var r=c("div");return n.forEach(function(t){var n,s,d,m=c("div"),u=c("div"),l=c("div"),p=c("div"),v=c("div"),f=c("div"),y=c("div"),g=c("button"),b=c("button"),M=$(e,t.id),x=c("div"),L=function(e){for(var t=["#c10000","#c16a00","#005b0c","#009385","#006192","#3a00a8","#8e00a8","#e50076","#383838"],n=0,o=0;o<e.length;o++)n+=e.charCodeAt(o);return t[n%t.length]}(t.name);f.id=k+t.id,g.id=j+t.id,b.id=E+t.id,x.id=w+t.id,m.style.borderLeft="3px solid "+L,p.innerHTML=t.name,l.style.background=L,l.style.boxShadow="0px 0px 0px 2px "+L,l.innerHTML=t.name[0].toUpperCase(),f.innerHTML=h.makeHtml(t.comment),v.innerHTML=(n=Date.now(),s=Date.parse(t.timestamp),(d=n-s)<5e3?"just now":d<6e4?Math.round(d/1e3)+" seconds ago":d<36e5?Math.round(d/6e4)+" minutes ago":d<864e5?Math.round(d/36e5)+" hours ago":d<2592e6?"approximately "+Math.round(d/864e5)+" days ago":d<94608e7?"approximately "+Math.round(d/2592e6)+" months ago":"approximately "+Math.round(d/94608e7)+" years ago"),g.innerHTML="Reply",b.innerHTML="Collapse",a(g,F,t.id),a(b,F,t.id),i(m,"card"),i(u,"card-header"),i(l,"card-avatar"),i(p,"name-header"),i(v,"card-subtitle"),i(f,A),i(y,"card-options"),i(g,O),i(g,U),i(b,O),i(b,R),o(y,g),o(y,b),o(u,y),o(u,l),o(u,p),o(u,v),o(x,f),M&&(i(M,A),o(x,M)),o(m,u),o(m,x),o(r,m)}),r},_=function(e){if(e){var t,a=n(b),i={};a.innerHTML="",e.forEach(function(e){(t=e.parent)in i||(i[t]=[]),i[t].push(e)});var r=$(i,-1);r&&o(a,r)}},ee=function(){var e,o=n(f),a=n(y),c=o.value,s=a.value;r(o,z),r(a,z),c&&c.length?s&&s.length?(e={url:t.location,comment:o.value,name:a.value,parent:-1},W&&(e.gotcha=n(M).value),m(g),d(Y.create,e,function(){Z(function(){o.value="",u(g)})})):i(a,z):i(o,z)},te=function(e){var o=n(x+e),a=n(L+e),c=o.value,s=a.value;if(r(o,z),r(a,z),c&&c.length)if(s&&s.length){var l={comment:c,name:s,parent:e,url:t.location};W&&(l.gotcha=n(H+e).value),m(C+e),d(Y.create,l,function(){Z(function(){u(g)})})}else i(a,z);else i(o,z)},ne=function(e){n(x+e).remove(),n(C+e).remove(),n(T+e).remove(),n(L+e).remove(),i(n(j+e),"initial")},oe=function(e){var t=n(k+e),r=c("textarea"),d=c("div"),m=c("div"),u=c("input"),p=c("input"),v=c("button"),h=c("button");r.id=x+e,u.id=L+e,p.id=H+e,v.id=T+e,h.id=C+e,v.innerHTML="Cancel",h.innerHTML="Reply",a(v,F,e),a(h,F,e),i(n(j+e),B),i(r,X),i(m,J),i(d,D),i(u,"input"),i(p,B),i(v,S),i(v,P),i(v,"post-red-btn"),i(h,P),i(h,q),i(h,N),r.oninput=l(r),s(u,"placeholder","Name"),o(t,r),o(d,u),W&&o(d,p),o(d,h),o(d,v),o(m,d),o(t,m),ie(e)},ae=function(e){var t=n(w+e),o=n(E+e);i(t,B),o.innerHTML="Expand",setTimeout(function(){i(o,I),r(o,E)},0)},ie=function(e){var t=n(w+e),o=n(E+e);r(t,B),o.innerHTML="Collapse",setTimeout(function(){i(o,E),r(o,I)},0)},re=e.Commento||{};re.version="0.2.0",re.init=function(e){var a,r,d,m,u,x,w;Q=e.serverUrl||Q,V=e.serverUrlAssets||V,W=e.honeypot||W,G=e.showdownUrl||V+G,K=e.commentoCssUrl||V+K,Y.get=Q+"/get",Y.create=Q+"/create",a=K,r=c("link"),d=t.getElementsByTagName("head")[0],r.type="text/css",s(r,"href",a),s(r,"rel","stylesheet"),o(d,r),m=G,u=function(){h=new showdown.Converter;var e=n("commento"),t=c("div"),a=c("textarea"),r=c("div"),d=c("div"),m=c("input"),u=c("button"),x=c("input"),w=c("div");a.id=f,m.id=y,w.id=b,x.id=M,u.id=g,u.innerHTML="Post comment",i(a,X),i(d,D),i(r,J),i(m,"input"),i(u,P),i(u,q),i(x,B),s(m,"placeholder","Name"),a.oninput=l(a),p(u,"click",ee),p(m,"keypress",function(e){13===e.keyCode&&ee()}),p(e,"click",v(U,F,oe)),p(e,"click",v(R,F,ae)),p(e,"click",v(I,F,ie)),p(e,"click",v(S,F,ne)),p(e,"click",v(N,F,te)),o(d,m),o(d,u),o(r,d),W&&o(d,x),o(t,a),o(t,r),o(t,w),o(e,t),Z()},x=t.createElement("script"),w=!1,x.type="application/javascript",x.src=m,x.async=!0,x.onreadystatechange=x.onload=function(){w||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||u(),w=!0,x.onload=x.onreadystatechange=null},o(t.body,x)},e.Commento=re}(window,document);