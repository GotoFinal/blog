!function(t,e){"use strict";function n(t){return e.getElementById(t)}function o(t,e){t.appendChild(e)}function r(t,e){return t.dataset[e]}function a(t,e,n){t.dataset[e]=n}function i(t,e){return t.classList.contains(e)}function c(t,e){t.classList.add(e)}function m(t,e){t.classList.remove(e)}function d(t){return e.createElement(t)}function s(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function u(t,e,n){t.setAttribute(e,n)}function l(t,e,n){var o=new XMLHttpRequest;o.open("POST",t,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===o.readyState&&200===o.status&&n(o)},o.send(s(e))}function p(t){var e=n(t);e.disabled=!0,c(e,"loading")}function h(t){var e=n(t);e.disabled=!1,m(e,"loading")}function v(t){for(var e=["#c10000","#c16a00","#005b0c","#009385","#006192","#3a00a8","#8e00a8","#e50076","#383838"],n=0,o=0;o<t.length;o++)n+=t.charCodeAt(o);return e[n%e.length]}function f(t,n){var r=e.createElement("script"),a=!1;r.type="application/javascript",r.src=t,r.async=!0,r.onreadystatechange=r.onload=function(){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||n(),a=!0,r.onload=r.onreadystatechange=null},o(e.body,r)}function y(t){var n=d("link"),r=e.getElementsByTagName("head")[0];n.type="text/css",u(n,"href",t),u(n,"rel","stylesheet"),o(r,n)}function b(t,e){var n=t-e;return n<5e3?"just now":n<6e4?Math.round(n/1e3)+" seconds ago":n<36e5?Math.round(n/6e4)+" minutes ago":n<864e5?Math.round(n/36e5)+" hours ago":n<2592e6?"approximately "+Math.round(n/864e5)+" days ago":n<94608e7?"approximately "+Math.round(n/2592e6)+" months ago":"approximately "+Math.round(n/94608e7)+" years ago"}function g(t){return function(){t.style.height="",t.style.height=Math.min(Math.max(t.scrollHeight,75),400)+"px"}}function x(t,e,n){t.addEventListener(e,n)}function M(t,e,n){return function(o){var a,c=o.target;i(c,t)&&(a=r(c,e))&&n(a)}}var w,L="commento-root-post",H="commento-collapse-button-",T="/assets/vendor/showdown.min.js",j="/assets/style/commento.min.css",C="",I=!1,k={},E=function(t){var n={url:e.location};l(k.get,n,function(e){var n={comments:[]};try{n=JSON.parse(e.response)}catch(t){}R(n.comments),"function"==typeof t&&t()})},S=function(t,e){var n=t[e];if(!n||!n.length)return null;var r=d("div");return n.forEach(function(e){var n=d("div"),i=d("div"),m=d("div"),s=d("div"),u=d("div"),l=d("div"),p=d("div"),h=d("button"),f=d("button"),y=S(t,e.id),g=d("div"),x=v(e.name);l.id="commento-body-"+e.id,h.id="commento-reply-button-"+e.id,f.id=H+e.id,g.id="comment-contents-"+e.id,n.style.borderLeft="3px solid "+x,s.innerHTML=e.name,m.style.background=x,m.style.boxShadow="0px 0px 0px 2px "+x,m.innerHTML=e.name[0].toUpperCase(),l.innerHTML=w.makeHtml(e.comment),u.innerHTML=b(Date.now(),Date.parse(e.timestamp)),h.innerHTML="Reply",f.innerHTML="Collapse",a(h,"commentId",e.id),a(f,"commentId",e.id),c(n,"card"),c(i,"card-header"),c(m,"card-avatar"),c(s,"name-header"),c(u,"card-subtitle"),c(l,"card-body"),c(p,"card-options"),c(h,"option-btn"),c(h,"commento-show-reply-js"),c(f,"option-btn"),c(f,"commento-collapse-thread-js"),o(p,h),o(p,f),o(i,p),o(i,m),o(i,s),o(i,u),o(g,l),y&&(c(y,"card-body"),o(g,y)),o(n,i),o(n,g),o(r,n)}),r},R=function(t){if(t){var e,r=n("commento-coms"),a={};r.innerHTML="",t.forEach(function(t){e=t.parent,e in a||(a[e]=[]),a[e].push(t)});var i=S(a,-1);i&&o(r,i)}},U=function(){var t,o=n("commento-root-comment"),r=n("commento-root-name"),a=o.value,i=r.value;return m(o,"is-error"),m(r,"is-error"),a&&a.length?i&&i.length?(t={url:e.location,comment:o.value,name:r.value,parent:-1},I&&(t.gotcha=n("commento-root-gotcha").value),p(L),void l(k.create,t,function(){E(function(){o.value="",h(L)})})):void c(r,"is-error"):void c(o,"is-error")},N=function(t){var o=n("commento-textarea-"+t),r=n("commento-name-input-"+t),a=o.value,i=r.value;if(m(o,"is-error"),m(r,"is-error"),!a||!a.length)return void c(o,"is-error");if(!i||!i.length)return void c(r,"is-error");var d={comment:a,name:i,parent:t,url:e.location};I&&(d.gotcha=n("commento-gotcha-"+t).value),p("commento-submit-button-"+t),l(k.create,d,function(){E(function(){h(L)})})},O=function(t){n("commento-textarea-"+t).remove(),n("commento-submit-button-"+t).remove(),n("commento-cancel-button-"+t).remove(),n("commento-name-input-"+t).remove(),c(n("commento-reply-button-"+t),"initial")},P=function(t){var e=n("commento-body-"+t),r=d("textarea"),i=d("div"),m=d("div"),s=d("input"),l=d("input"),p=d("button"),h=d("button");r.id="commento-textarea-"+t,s.id="commento-name-input-"+t,l.id="commento-gotcha-"+t,p.id="commento-cancel-button-"+t,h.id="commento-submit-button-"+t,p.innerHTML="Cancel",h.innerHTML="Reply",a(p,"commentId",t),a(h,"commentId",t),c(n("commento-reply-button-"+t),"hidden"),c(r,"textarea"),c(m,"other-fields-container"),c(i,"other-fields"),c(s,"input"),c(l,"hidden"),c(p,"commento-js-cancel"),c(p,"post-btn"),c(p,"post-red-btn"),c(h,"post-btn"),c(h,"post-primary-btn"),c(h,"commento-submit-js"),r.oninput=g(r),u(s,"placeholder","Name"),o(e,r),o(i,s),I&&o(i,l),o(i,h),o(i,p),o(m,i),o(e,m),A(t)},q=function(t){var e=n("comment-contents-"+t),o=n(H+t);c(e,"hidden"),o.innerHTML="Expand",setTimeout(function(){c(o,"commento-expand-thread-js"),m(o,H)},0)},A=function(t){var e=n("comment-contents-"+t),o=n(H+t);m(e,"hidden"),o.innerHTML="Collapse",setTimeout(function(){c(o,H),m(o,"commento-expand-thread-js")},0)},B=t.Commento||{};B.version="0.2.0",B.init=function(t){C=t.serverUrl||C,I=t.honeypot||I,T=t.showdownUrl||C+T,j=t.commentoCssUrl||C+j,k.get=C+"/get",k.create=C+"/create",y(j),f(T,function(){w=new showdown.Converter;var t=n("commento"),e=d("div"),r=d("textarea"),a=d("div"),i=d("div"),m=d("input"),s=d("button"),l=d("input"),p=d("div");r.id="commento-root-comment",m.id="commento-root-name",p.id="commento-coms",l.id="commento-root-gotcha",s.id=L,s.innerHTML="Post comment",c(r,"textarea"),c(i,"other-fields"),c(a,"other-fields-container"),c(m,"input"),c(s,"post-btn"),c(s,"post-primary-btn"),c(l,"hidden"),u(m,"placeholder","Name"),r.oninput=g(r),x(s,"click",U),x(m,"keypress",function(t){13===t.keyCode&&U()}),x(t,"click",M("commento-show-reply-js","commentId",P)),x(t,"click",M("commento-collapse-thread-js","commentId",q)),x(t,"click",M("commento-expand-thread-js","commentId",A)),x(t,"click",M("commento-js-cancel","commentId",O)),x(t,"click",M("commento-submit-js","commentId",N)),o(i,m),o(i,s),o(a,i),I&&o(i,l),o(e,r),o(e,a),o(e,p),o(t,e),E()})},t.Commento=B}(window,document);